export function initNavToggle(){const e=document.createElement("button");e.innerHTML="☰",e.className="md:hidden text-2xl p-2 focus:outline-none",e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls","nav-menu"),e.setAttribute("aria-label","Toggle navigation menu");const t=document.querySelector("nav > div > div.flex.items-center.space-x-4");t&&(t.id="nav-menu",t.classList.add("transition-all","duration-300","ease-in-out"),e.addEventListener("click",()=>{const n=t.classList.contains("hidden");t.classList.toggle("hidden"),e.setAttribute("aria-expanded",!n)}),t.parentNode.insertBefore(e,t),t.classList.add("hidden","flex-col","space-y-2","md:flex","md:flex-row","md:space-x-4"))}export function initDarkMode(){const e=document.createElement("button");e.textContent="🌙",e.className="ml-4 px-3 py-1 border rounded text-indigo-600 hover:bg-indigo-100 focus:outline-none",e.title="Toggle Dark Mode",e.setAttribute("aria-label","Toggle dark mode"),e.addEventListener("click",()=>{document.documentElement.classList.toggle("dark"),document.documentElement.classList.contains("dark")?(e.textContent="☀️",localStorage.setItem("darkMode","enabled")):(e.textContent="🌙",localStorage.setItem("darkMode","disabled"))});const t=document.querySelector("nav > div > div.flex.items-center.space-x-4");t&&t.appendChild(e),("enabled"===localStorage.getItem("darkMode")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(document.documentElement.classList.add("dark"),e.textContent="☀️")}export function initFadeIn(){const e=document.querySelectorAll("section, main, header, footer");e.forEach(e=>{e.classList.add("opacity-0","transition-opacity","duration-1000","ease-in-out")}),setTimeout(()=>{e.forEach(e=>{e.classList.remove("opacity-0"),e.classList.add("opacity-100")})},100)}export function initSearch(){const e=document.querySelector('input[placeholder="Search tools..."]'),t=document.querySelector('button[type="submit"]')||document.querySelector("button").contains("Search"),n=document.querySelectorAll(".grid > div");e&&n.length>0&&(e.addEventListener("input",e=>{const t=e.target.value.toLowerCase();n.forEach(e=>{const n=e.querySelector("h3").textContent.toLowerCase(),a=e.querySelector("p").textContent.toLowerCase();n.includes(t)||a.includes(t)?e.style.display="block":e.style.display="none"})}),e.addEventListener("blur",()=>{""===e.value.trim()?e.setCustomValidity("Please enter a search term"):e.setCustomValidity("")}),t&&t.addEventListener("click",t=>{t.preventDefault();const n=e.value.trim();""===n?(alert("Please enter a search term"),e.focus()):alert(`Searching for: ${n}`)}))}export function initXSSScannerDemo(){const e=document.getElementById("scan-xss"),t=document.getElementById("xss-input"),n=document.getElementById("xss-output");e&&t&&n&&e.addEventListener("click",()=>{const e=scanForXSS(t.value);n.value=e?"Potential XSS detected!":"No XSS detected."})}function scanForXSS(e){return/<script.*?>.*?<\/script.*?>|on\w+=["'].*?["']/gi.test(e)}export function init(){initNavToggle(),initDarkMode(),initFadeIn(),initSearch(),initXSSScannerDemo();const e=document.getElementById("scan-xss");if(e){new MutationObserver(()=>{document.documentElement.classList.contains("dark")?e.classList.add("dark"):e.classList.remove("dark")}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}}export function initAPIPlayground(){const e=document.getElementById("api-select"),t=document.getElementById("request-editor"),n=document.getElementById("send-request"),a=document.getElementById("response-display"),o=document.getElementById("response-status");if(!(e&&t&&n&&a&&o))return;const r=document.querySelectorAll(".grid > div h3"),i=Array.from(r).map(e=>e.textContent.trim()),s={},d={"XSS Scanner":{endpoint:"/api/xss-scan",method:"POST",example:JSON.stringify({code:"<script>alert('xss')<\/script>"},null,2)},"SQL Injection Scanner":{endpoint:"/api/sql-injection-scan",method:"POST",example:JSON.stringify({code:"SELECT * FROM users WHERE id = '1' OR '1'='1'"},null,2)},"SEO Meta Validator":{endpoint:"/api/seo-meta-validate",method:"POST",example:JSON.stringify({html:"<html><head><title>My Page</title><meta name='description' content='Page description'></head></html>"},null,2)},"Code Complexity Analyzer":{endpoint:"/api/code-complexity",method:"POST",example:JSON.stringify({code:"function factorial(n) { if (n <= 1) return 1; return n * factorial(n-1); }"},null,2)},"Dependency Vulnerability Checker":{endpoint:"/api/dependency-check",method:"POST",example:JSON.stringify({dependencies:{express:"4.17.1",lodash:"4.17.20"}},null,2)},"JSON-to-XML Converter":{endpoint:"/api/json-to-xml",method:"POST",example:JSON.stringify({name:"John",age:30,city:"New York"},null,2)},"YAML Validator Formatter":{endpoint:"/api/yaml-validate",method:"POST",example:JSON.stringify({yaml:"name: John\nage: 30\ncity: New York"},null,2)},"CSV-to-JSON API":{endpoint:"/api/csv-to-json",method:"POST",example:JSON.stringify({csv:"name,age,city\nJohn,30,New York\nJane,25,London"},null,2)},"Image Format Converter":{endpoint:"/api/image-convert",method:"POST",example:JSON.stringify({imageUrl:"https://example.com/image.jpg",targetFormat:"png"},null,2)},"PDF Text Extractor":{endpoint:"/api/pdf-extract",method:"POST",example:JSON.stringify({pdfUrl:"https://example.com/document.pdf"},null,2)},"Dockerfile Generator":{endpoint:"/api/dockerfile-generate",method:"POST",example:JSON.stringify({language:"nodejs",framework:"express",port:3e3},null,2)},"Nginx Config Generator":{endpoint:"/api/nginx-config",method:"POST",example:JSON.stringify({domain:"example.com",port:3e3,ssl:!0},null,2)},"Let's Encrypt Bot Simulator":{endpoint:"/api/letsencrypt-simulate",method:"POST",example:JSON.stringify({domain:"example.com",email:"admin@example.com"},null,2)},"Git Command Helper":{endpoint:"/api/git-help",method:"POST",example:JSON.stringify({command:"git rebase -i HEAD~3"},null,2)},"UUID Generator":{endpoint:"/api/uuid-generate",method:"POST",example:JSON.stringify({count:5},null,2)},"Password Strength API":{endpoint:"/api/password-strength",method:"POST",example:JSON.stringify({password:"MySecurePassword123!"},null,2)},"Hash Generator":{endpoint:"/api/hash-generate",method:"POST",example:JSON.stringify({text:"hello world",algorithm:"sha256"},null,2)},"Unit Test Generator":{endpoint:"/api/unit-test-generate",method:"POST",example:JSON.stringify({function:"function add(a, b) { return a + b; }"},null,2)},"Color Converter API":{endpoint:"/api/color-convert",method:"POST",example:JSON.stringify({color:"#FF0000",from:"hex",to:"rgb"},null,2)},"Fake User Generator":{endpoint:"/api/fake-user",method:"POST",example:JSON.stringify({count:3,locale:"en_US"},null,2)}};i.forEach(e=>{s[e]=d[e]?d[e]:{endpoint:`/api/${e.toLowerCase().replace(/\s+/g,"-")}`,method:"POST",example:JSON.stringify({message:`Example request for ${e}`},null,2)}}),i.forEach(t=>{const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)}),e.addEventListener("change",e=>{const n=e.target.value;n&&s[n]?t.value=s[n].example:t.value=""}),n.addEventListener("click",async()=>{const r=e.value;if(!r)return void alert("Please select an API first.");const i=t.value.trim();if(i){n.disabled=!0,n.textContent="Sending...",o.textContent="Status: Sending request...";try{JSON.parse(i);const e=await async function(e,t){await new Promise(e=>setTimeout(e,1e3+2e3*Math.random()));const n=JSON.parse(t);s[e];switch(e){case"XSS Scanner":return{vulnerable:Math.random()>.7,issues:Math.random()>.7?["Potential XSS in user input"]:[],recommendations:["Sanitize user input","Use Content Security Policy"]};case"SQL Injection Scanner":return{vulnerable:Math.random()>.7,issues:Math.random()>.7?["Potential SQL injection in user input"]:[],recommendations:["Use prepared statements","Validate input data"]};case"SEO Meta Validator":return{score:Math.floor(40*Math.random())+60,issues:["Missing Open Graph tags","Title too short"],suggestions:["Add meta description","Include structured data"]};case"Code Complexity Analyzer":return{complexity:Math.floor(10*Math.random())+1,maintainability:Math.floor(40*Math.random())+60,suggestions:["Break down into smaller functions","Reduce nesting"]};case"Dependency Vulnerability Checker":return{totalDependencies:Object.keys(n.dependencies||{}).length,vulnerabilities:Math.floor(3*Math.random()),critical:Math.floor(2*Math.random()),recommendations:["Update to latest versions","Remove unused dependencies"]};case"JSON-to-XML Converter":return{xml:"<root><name>John</name><age>30</age><city>New York</city></root>",converted:!0};case"YAML Validator Formatter":return{valid:!0,formatted:"name: John\nage: 30\ncity: New York\n",errors:[]};case"CSV-to-JSON API":return[{name:"John",age:30,city:"New York"},{name:"Jane",age:25,city:"London"}];case"Image Format Converter":return{success:!0,convertedUrl:"https://example.com/converted-image.png",originalFormat:"jpg",targetFormat:"png"};case"PDF Text Extractor":return{text:"This is extracted text from the PDF document...",pages:5,totalWords:1250};case"Dockerfile Generator":return{dockerfile:'FROM node:14\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install\nCOPY . .\nEXPOSE 3000\nCMD ["npm", "start"]',generated:!0};case"Nginx Config Generator":return{config:"server {\n    listen 80;\n    server_name example.com;\n    location / {\n        proxy_pass http://localhost:3000;\n    }\n}",generated:!0};case"Let's Encrypt Bot Simulator":return{success:!0,certificate:"-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----",validUntil:"2024-12-31"};case"Git Command Helper":return{explanation:"Interactive rebase allows you to modify commits in your history.",steps:["Start interactive rebase","Choose operations for each commit","Save and exit"],alternatives:["git reset --soft HEAD~3","git commit --amend"]};case"UUID Generator":const t=[];for(let e=0;e<(n.count||1);e++)t.push("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));return{uuids:t};case"Password Strength API":const a=Math.floor(40*Math.random())+60;return{strength:a,score:a>=80?"Strong":a>=60?"Medium":"Weak",breached:Math.random()>.8,suggestions:["Add special characters","Use longer password"]};case"Hash Generator":return{hash:{md5:"5d41402abc4b2a76b9719d911017c592",sha256:"b94d27b9934d3e08a52e52d7da7dabfac484efe37a5380ee9088f7ace2efcde9"}[n.algorithm]||"hashed_value_here",algorithm:n.algorithm,input:n.text};case"Unit Test Generator":return{tests:['describe("add function", () => {','  test("adds two numbers", () => {',"    expect(add(2, 3)).toBe(5);","  });","});"],generated:!0};case"Color Converter API":const o={hex:"#FF0000",rgb:"rgb(255, 0, 0)",hsl:"hsl(0, 100%, 50%)"};return{original:n.color,converted:o[n.to]||o.hex,from:n.from,to:n.to};case"Fake User Generator":const r=[];for(let e=0;e<(n.count||1);e++)r.push({id:e+1,name:`User ${e+1}`,email:`user${e+1}@example.com`,address:{street:`123 Main St ${e+1}`,city:"Anytown",zipcode:"12345"}});return{users:r};default:return{message:"Mock response for "+e}}}(r,i);a.textContent=JSON.stringify(e,null,2),o.textContent="Status: 200 OK (Mock Response)"}catch(e){e instanceof SyntaxError?(a.textContent="Error: Invalid JSON in request body",o.textContent="Status: 400 Bad Request"):(a.textContent=`Error: ${e.message}`,o.textContent="Status: 500 Internal Server Error")}finally{n.disabled=!1,n.textContent="Send Request"}}else alert("Please enter a request body.")})}document.addEventListener("DOMContentLoaded",()=>{init(),initAPIPlayground()});